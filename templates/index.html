<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <title>Visualisasi Data Cabai</title>
  <link rel="stylesheet" href="/lib/dataTables.dataTables.min.css" />
  <link rel="stylesheet" href="/dist/output.css" />
  <style>
    /* .dt-search {
      display: none;
    } */
  </style>
</head>

<body class="w-full">
  <nav class="w-full flex items-center gap-5 p-5 bg-white border-b border-gray-200 sticky top-0 left-0 z-10 shadow-b shadow-md">
    <a href="/" class="text-cyan-500 font-bold hover:bg-cyan-500 hover:text-white px-6 py-3 rounded-md">üè† Home</a>
    <a href="/data" class="text-cyan-500 font-bold hover:bg-cyan-500 hover:text-white px-6 py-3 rounded-md">Data</a>
  </nav>
  <div class="w-full flex flex-col gap-5 p-10">
    <header class="text-center py-5">
      <h1 class="text-4xl md:text-5xl font-extrabold">
        üìä
        <span class="tracking-tight bg-linear-to-r from-teal-400 to-cyan-500 bg-clip-text text-transparent">
          Prediksi Produksi Cabai Rawit
        </span>
      </h1>
      <p class="text-gray-400 mt-2 text-sm md:text-base">
        Perbandingan Nilai Aktual dan Prediksi Produksi Cabai Rawit
      </p>
    </header>
    <table class="min-w-full border border-gray-200 text-sm" id="tabel-data">
      <thead class="bg-gray-100 sticky top-0">
        <tr>
          <th class="px-4 py-2 text-left text-gray-600">
            Kecamatan (Index)
          </th>
          <th class="px-4 py-2 text-left text-gray-600">Aktual</th>
          <th class="px-4 py-2 text-left text-gray-600">Prediksi</th>
          <th class="px-4 py-2 text-left text-gray-600">Selisih</th>
        </tr>
      </thead>
      <!-- <tbody>
        {% for aktual in aktuals %}
        <tr class="hover:bg-gray-50">
          <td class="px-4 py-2 border-t border-gray-200">
            {{ kecs[aktual["Index"]] }}
          </td>
          <td class="px-4 py-2 border-t border-gray-200">
            {{ aktual["Aktual"] }}
          </td>
          <td class="px-4 py-2 border-t border-gray-200">
            {{ aktual["Prediksi"] }}
          </td>
          <td class="px-4 py-2 border-t border-gray-200">
            {{ aktual["Selisih"] }}
          </td>
        </tr>
        {% endfor %}
      </tbody> -->
    </table>
  </div>

  <script src="/lib/jquery.js"></script>
  <script src="/lib/dataTables.min.js"></script>
  <script>
    const header = [
      { title: "Kecamatan", data: "Kecamatan", name: "Kecamatan" },
      { title: "Aktual", data: "Aktual", name: "Aktual" },
      { title: "Prediksi", data: "Prediksi", name: "Prediksi" },
      { title: "Selisih", data: "Selisih", name: "Selisih" },
    ];

    const table = new DataTable("#tabel-data", {
      data: [],
      columns: header,
      scrollX: true,
      responsive: true,
      searching: true,
    });

    // --- Pencarian Kecamatan ---
    // $("#search-kecamatan").on("keyup", function () {
    //   table.column(1).search($(this).val()).draw();
    // });


    fetch("/data-aktual")
      .then((res) => res.json())
      .then((data) => {
        const listTahun = [...new Set(data.map((item) => item.Tahun))];
        // searchTahun.empty();
        // searchTahun.append(`<option value="">Semua</option>`);
        // listTahun.forEach((tahun) => {
        //   searchTahun.append(`<option value=${tahun}>${tahun}</option>`);
        // });
        console.log(listTahun);
        table.clear().rows.add(data).draw();
      });
  </script>
</body>

</html>